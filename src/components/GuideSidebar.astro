---
import { getCollection } from "astro:content";
const posts = (await getCollection("guide")).sort(
  (b, a) => a.data.pubDate.valueOf() - b.data.pubDate.valueOf()
);
import i18next, { t, changeLanguage } from "i18next";
import { Trans } from "astro-i18next/components";
---

<sidebar>
  <div
    class="offcanvas offcanvas-start"
    tabindex="-1"
    id="offcanvasExample"
    aria-labelledby="offcanvasExampleLabel">
    <div class="offcanvas-body">
      <div class="fade-sidebar"></div><button
        type="button"
        class="btn-close"
        style="top:23px; left:20px; z-index: 100; position:absolute;"
        data-bs-dismiss="offcanvas"
        aria-label="Close"></button><h4
        style="top:20px; right:15px; font-family: Gilroy; z-index: 100; position:absolute;">
        {t("guidePost.whereTo")}
      </h4>
      <div>
        <div class="sidebarcontent">
          <div class="post">
            <a href={`/guide/install`}>
              <img class="mainimg" src="../../img/guidebg-1.png" />
              <div
                class="title-main"
                style="text-align: center; font-size:20px; font-family:Gilroy;">
                <i class="fa-solid fa-download" style="margin-right:5px;"></i>{
                  t("guidePost.installGuide")
                }
              </div>
            </a>
          </div>
          <div class="post">
            <a href={`/guide/2problemsolving/`}>
              <img class="mainimg" src="../../img/guidebg-3.png" />
              <div
                class="title-main"
                style="text-align: center; font-size:20px; font-family:Gilroy;">
                <i
                  class="fa-solid fa-circle-exclamation"
                  style="margin-right:5px;"></i>{t("guidePost.problemSolving")}
              </div>
            </a>
          </div>
          <div class="post">
            <a href={`/guide/3faq/`}>
              <img class="mainimg" src="../../img/guidebg-2.png" />
              <div
                class="title-main"
                style="text-align: center; font-size:20px; font-family:Gilroy;">
                <i class="fa-solid fa-circle-question" style="margin-right:5px;"
                ></i>{t("guidePost.faq")}
              </div>
            </a>
          </div>
        </div>

        <div class="sidebarcontent">
          <h4 style="font-family: Gilroy; font-size:25px; margin-bottom:20px;">
            <Trans i18nKey="guidePost.lookingFor">
              What are you <b class="color">looking for</b>?
            </Trans>
          </h4>
          {
            posts.map(post => (
              <div class="post2">
                <a href={`/guide/${post.slug}/`}>
                  <div class="title2">
                    <i class={post.data.icon} style="margin-right:8px;" />{" "}
                    {post.data.title}
                  </div>
                </a>
              </div>
            ))
          }
        </div>

        <a href="https://wii.hacks.guide"
          ><div class="wiiguide">
            <Trans i18nKey="guidePost.visitWiiHacks">
              Visit wii.hacks.guide
            </Trans>
          </div></a
        >ZZZZ
      </div>
    </div>
  </div>
</sidebar>
<style>
  a {
    text-decoration: none;
  }

  .mainimg {
    transform: translate(-15px, -15px);
    width: 100%;
    transform-origin: center;
    transition: 0.5s;
    background-size: cover;
    position: absolute;
  }

  .offcanvas {
    margin: 8px;
    border-radius: 18px;
    box-shadow: 0px 0px 20px #00000040;
    overflow: hidden;
    height: calc(100% - 18px);
  }

  .title-main {
    font-family:
      systemui,
      -apple-system,
      BlinkMacSystemFont,
      "Segoe UI",
      Roboto,
      Oxygen,
      Ubuntu,
      Cantarell,
      "Open Sans",
      "Helvetica Neue",
      sans-serif;
    color: white;
    transition: 0.3s;
    z-index: 100;
    position: relative;
  }

  .title2 {
    font-family:
      systemui,
      -apple-system,
      BlinkMacSystemFont,
      "Segoe UI",
      Roboto,
      Oxygen,
      Ubuntu,
      Cantarell,
      "Open Sans",
      "Helvetica Neue",
      sans-serif;
    color: #121212a2;
    transition: 0.3s;
    z-index: 100;
    position: relative;
  }

  .title2:hover {
    color: #121212;
    transition: 0.3s;
  }

  .btn {
    left: 0;
    z-index: 1000;
    position: absolute;
  }

  .sidebarholder {
    width: 17%;
    height: 87%;
    bottom: 0;
    left: 8%;
    border-radius: 8px;
    position: absolute;
    overflow: scroll;
  }

  .fade-sidebar {
    top: 0;
    left: 0;
    width: 100%;
    height: 80px;
    background: rgb(255, 255, 255);
    background: linear-gradient(
      180deg,
      rgb(255, 255, 255) 20%,
      rgba(0, 0, 0, 0) 100%
    );
    z-index: 100;
    position: absolute;
  }

  .sidebarcontent {
    top: 65px;
    font-family: Cafe;
    font-size: 15px;
    margin-bottom: 40px;
    z-index: 0;
    position: relative;
  }

  .post {
    width: 100%;
    height: 60px;
    padding: 15px;
    overflow: hidden;
    border-radius: 8px;
    margin-bottom: 10px;
    position: relative;
  }

  .post2 {
    margin-bottom: 30px;
  }

  .post2:nth-child(1) {
    display: none;
  }

  .post2:nth-child(2) {
    display: none;
  }

  .post2:nth-child(3) {
    display: none;
  }

  .post2:nth-child(4) {
    display: none;
  }

  .post2 {
    display: block;
  }
  .wiiguide {
    top: 60px;
    width: 100%;
    background-color: rgb(79, 79, 211);
    border-radius: 8px;
    font-family: Gilroy;
    font-size: 25px;
    text-align: center;
    color: white;
    padding-top: 20px;
    padding-bottom: 20px;
    position: relative;
    transition: 0.2s;
  }

  .color {
    background: url("/img/header_bg.png");
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    filter: brightness(150%);
  }

  .hover {
    display: none;
  }

  .wiiguide:hover {
    background-color: rgb(58, 58, 197);
    text-decoration: underline;
    transition: 0.2s;
  }
</style>
